# ğŸš‚ py12306 è´­ç¥¨åŠ©æ‰‹
åˆ†å¸ƒå¼ï¼Œå¤šè´¦å·ï¼Œå¤šä»»åŠ¡è´­ç¥¨

## å‰è¨€
ä»Šå¹´å›å®¶çš„ç¥¨æ˜æ˜¾è¦éš¾ä¹°å¾ˆå¤šï¼Œæ—©æ—©å°±ç­”åº”äº†çˆ¶æ¯ä»Šå¹´çš„ç¥¨æ²¡é—®é¢˜ï¼Œåˆ°ç°åœ¨ä¸€å¼ ç¥¨æ²¡ä¹°åˆ°ï¼Œè™½ç„¶å®¶é‡Œå·²ç»è®¢äº†æ±½è½¦ç¥¨ï¼Œè®©æˆ‘ä¸ç”¨æ“å¿ƒï¼Œä½†æ˜¯æƒ³æƒ³ä»–ä»¬ä¸€è¡Œè¿˜æœ‰å°å­©ï¼Œå¿ƒè¿˜æ˜¯å¾ˆä¼¤çš„ã€‚
è¿™æ®µæ—¶é—´ä» 12306Bypass åˆ° testerSunshine å¤§ä½¬å†™çš„ [12306](https://github.com/testerSunshine/12306)ï¼Œè¿˜æ˜¯æ²¡ä¹°åˆ°ç¥¨ï¼Œç´¢æ€§å°±è‡ªå·±å†™äº†ä¸€ä¸ªï¼Œå¸Œæœ›ä¹Ÿèƒ½å¸®åŠ©åˆ°æ›´å¤šäºº

## Features
- [x] å¤šæ—¥æœŸæŸ¥è¯¢ä½™ç¥¨
- [x] è‡ªåŠ¨æ‰“ç ä¸‹å•
- [x] ç”¨æˆ·çŠ¶æ€æ¢å¤
- [x] ç”µè¯è¯­éŸ³é€šçŸ¥
- [x] å¤šè´¦å·ã€å¤šä»»åŠ¡ã€å¤šçº¿ç¨‹æ”¯æŒ
- [x] å•ä¸ªä»»åŠ¡å¤šç«™ç‚¹æŸ¥è¯¢ 
- [x] åˆ†å¸ƒå¼è¿è¡Œ
- [x] Docker æ”¯æŒ
- [x] åŠ¨æ€ä¿®æ”¹é…ç½®æ–‡ä»¶
- [x] é‚®ä»¶é€šçŸ¥
- [x] Web ç®¡ç†é¡µé¢
- [x] å¾®ä¿¡æ¶ˆæ¯é€šçŸ¥
- [ ] ä»£ç†æ± æ”¯æŒ

## ä½¿ç”¨
py12306 éœ€è¦è¿è¡Œåœ¨ python 3.6 ä»¥ä¸Šç‰ˆæœ¬ï¼ˆå…¶å®ƒç‰ˆæœ¬æš‚æœªæµ‹è¯•)

**1. å®‰è£…ä¾èµ–**
```bash
git clone https://github.com/pjialin/py12306

pip install -r requirements.txt
```

**2. é…ç½®ç¨‹åº**
```bash
cp env.py.example env.py
```
è‡ªåŠ¨æ‰“ç 

ç›®å‰æ”¯æŒå…è´¹æ‰“ç ï¼Œå’Œè‹¥å¿«æ‰“ç 

æ³¨ï¼šå…è´¹æ‰“ç æ— æ³•ä¿è¯æŒç»­å¯ç”¨ï¼Œå¦‚å¤±æ•ˆè¯·æ‰‹åŠ¨åˆ‡æ¢åˆ°è‹¥å¿«å¹³å°ï¼Œéœ€è¦å…ˆåˆ° [http://www.ruokuai.com](http://www.ruokuai.com/login) æ³¨å†Œä¸€ä¸ªè´¦å·åå¡«å†™åˆ°é…ç½®ä¸­

è¯­éŸ³é€šçŸ¥

è¯­éŸ³éªŒè¯ç ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘ API å¸‚åœºä¸Šçš„ä¸€ä¸ªæœåŠ¡å•†ï¼Œéœ€è¦åˆ° [https://market.aliyun.com/products/56928004/cmapi026600.html](https://market.aliyun.com/products/56928004/cmapi026600.html) è´­ä¹°åå°† appcode å¡«å†™åˆ°é…ç½®ä¸­

**3. å¯åŠ¨å‰æµ‹è¯•**

ç›®å‰æä¾›äº†ä¸€äº›ç®€å•çš„æµ‹è¯•ï¼ŒåŒ…æ‹¬ç”¨æˆ·è´¦å·æ£€æµ‹ï¼Œä¹˜å®¢ä¿¡æ¯æ£€æµ‹ï¼Œè½¦ç«™æ£€æµ‹ç­‰

å¼€å§‹æµ‹è¯• -t 
```bash
python main.py -t
```

æµ‹è¯•é€šçŸ¥æ¶ˆæ¯ (è¯­éŸ³, é‚®ä»¶) -t -n
```bash
# é»˜è®¤ä¸ä¼šè¿›è¡Œé€šçŸ¥æµ‹è¯•ï¼Œè¦å¯¹é€šçŸ¥è¿›è¡Œæµ‹è¯•éœ€è¦åŠ ä¸Š -n å‚æ•° 
python main.py -t -n
```

**4. è¿è¡Œç¨‹åº**
```bash
python main.py
```

### å‚æ•°åˆ—è¡¨

- -t æµ‹è¯•é…ç½®ä¿¡æ¯
- -t -n æµ‹è¯•é…ç½®ä¿¡æ¯ä»¥åŠé€šçŸ¥æ¶ˆæ¯
- -c æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä½ç½®

### åˆ†å¸ƒå¼é›†ç¾¤

é›†ç¾¤ä¾èµ–äº redisï¼Œç›®å‰æ”¯æŒæƒ…å†µ
- å•å°ä¸»èŠ‚ç‚¹å¤šä¸ªå­èŠ‚ç‚¹åŒæ—¶è¿è¡Œ
- ä¸»èŠ‚ç‚¹å®•æœºåè‡ªåŠ¨åˆ‡æ¢æå‡å­èŠ‚ç‚¹ä¸ºä¸»èŠ‚ç‚¹
- ä¸»èŠ‚ç‚¹æ¢å¤åè‡ªåŠ¨æ¢å¤ä¸ºçœŸå®ä¸»èŠ‚ç‚¹
- é…ç½®é€šè¿‡ä¸»èŠ‚ç‚¹åŒæ­¥åˆ°æ‰€æœ‰å­èŠ‚ç‚¹
- ä¸»èŠ‚ç‚¹é…ç½®ä¿®æ”¹åæ— éœ€é‡å¯å­èŠ‚ç‚¹ï¼Œæ”¯æŒè‡ªåŠ¨æ›´æ–°
- å­èŠ‚ç‚¹æ¶ˆæ¯å®æ—¶åŒæ­¥åˆ°ä¸»èŠ‚ç‚¹

**ä½¿ç”¨**

å°†é…ç½®æ–‡ä»¶çš„ä¸­ `CLUSTER_ENABLED` æ‰“å¼€å³å¼€å¯åˆ†å¸ƒå¼

ç›®å‰æä¾›äº†ä¸€ä¸ªå•ç‹¬çš„å­èŠ‚ç‚¹é…ç½®æ–‡ä»¶ `env.slave.py.example` å°†æ–‡ä»¶ä¿®æ”¹ä¸º `env.slave.py`ï¼Œ é€šè¿‡ `python main.py -c env.slave.py` å³å¯å¿«é€Ÿå¯åŠ¨


## Docker ä½¿ç”¨
**1. å°†é…ç½®æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°**
```bash
docker run --rm pjialin/py12306 cat /config/env.py > env.py
# æˆ–
curl https://raw.githubusercontent.com/pjialin/py12306/master/env.docker.py.example -o env.py
```

**2. ä¿®æ”¹å¥½é…ç½®åè¿è¡Œ**
```bash
docker run --rm --name py12306 -p 8008:8008 -d -v $(pwd):/config -v py12306:/data pjialin/py12306
```
å½“å‰ç›®å½•ä¼šå¤šä¸€ä¸ª 12306.log çš„æ—¥å¿—æ–‡ä»¶ï¼Œ `tail -f 12306.log`

### Docker-compose ä¸­ä½¿ç”¨
**1. å¤åˆ¶é…ç½®æ–‡ä»¶**
```
cp docker-compose.yml.example docker-compose.yml
```

**2. ä» docker-compose è¿è¡Œ**

åœ¨`docker-compose.yml`æ‰€åœ¨çš„ç›®å½•ä½¿ç”¨å‘½ä»¤
```
docker-compose up -d
```

## Web ç®¡ç†é¡µé¢

ç›®å‰æ”¯æŒç”¨æˆ·å’Œä»»åŠ¡ä»¥åŠå®æ—¶æ—¥å¿—æŸ¥çœ‹ï¼Œæ›´å¤šåŠŸèƒ½åç»­ä¼šä¸æ–­åŠ å…¥

**ä½¿ç”¨**

æ‰“å¼€ Web åŠŸèƒ½éœ€è¦å°†é…ç½®ä¸­çš„ `WEB_ENABLE` æ‰“å¼€ï¼Œå¯åŠ¨ç¨‹åºåè®¿é—®å½“å‰ä¸»æœºåœ°å€ + ç«¯å£å· (é»˜è®¤ 8008) å³å¯ï¼Œå¦‚ http://127.0.0.1:8008

## æ›´æ–°
- 19-01-10
    - æ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤
- 19-01-11
    - é…ç½®æ–‡ä»¶æ”¯æŒåŠ¨æ€ä¿®æ”¹
- 19-01-12
    - æ–°å¢å…è´¹æ‰“ç 
- 19-01-14
    - æ–°å¢ Web é¡µé¢æ”¯æŒ
- 19-01-15
    - æ–°å¢ é’‰é’‰é€šçŸ¥
    - æ–°å¢ Telegram é€šçŸ¥
    - æ–°å¢ ServerChan å’Œ PushBear å¾®ä¿¡æ¨é€
- 19-01-18
    - æ–°å¢ CDN æŸ¥è¯¢

## æˆªå›¾
### Web ç®¡ç†é¡µé¢
![Web ç®¡ç†é¡µé¢å›¾ç‰‡](https://github.com/pjialin/py12306/blob/master/data/images/web.png)

### ä¸‹å•æˆåŠŸ
![ä¸‹å•æˆåŠŸå›¾ç‰‡](https://github.com/pjialin/py12306/blob/master/data/images/order_success.png)

### å…³äºé˜²å°
ç›®å‰æŸ¥è¯¢å’Œç™»å½•æ“ä½œæ˜¯åˆ†å¼€çš„ï¼ŒæŸ¥è¯¢æ˜¯ä¸ä¾èµ–ç”¨æˆ·æ˜¯å¦ç™»å½•ï¼Œæ”¾åœ¨ A äº‘ T äº‘å®¹æ˜“è¢«é™åˆ¶ ipï¼Œå»ºè®®åœ¨å…¶å®ƒç½‘ç»œç¯å¢ƒä¸‹è¿è¡Œ

äº¤æµç¾¤ [274781597](http://shang.qq.com/wpa/qunwpa?idkey=8eab0b6402096266a62263c1cd452149926adb5cba7a2b7a98a5adc65869addf)

### Online IDE
[![åœ¨ Gitpod ä¸­æ‰“å¼€](https://gitpod.io/button/open-in-gitpod.svg)](https://gitpod.io#https://github.com/pjialin/py12306)

## Thanks
- æ„Ÿè°¢å¤§ä½¬ [testerSunshine](https://github.com/testerSunshine/12306)ï¼Œå€Ÿé‰´äº†éƒ¨åˆ†å®ç°
- æ„Ÿè°¢æ‰€æœ‰æä¾› pr çš„å¤§ä½¬ 

## License

[Apache License.](https://github.com/pjialin/py12306/blob/master/LICENSE)

