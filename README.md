# ğŸš‚ py12306 è´­ç¥¨åŠ©æ‰‹
åˆ†å¸ƒå¼ï¼Œå¤šè´¦å·ï¼Œå¤šä»»åŠ¡è´­ç¥¨

## å‰è¨€
ä»Šå¹´å›å®¶çš„ç¥¨æ˜æ˜¾è¦éš¾ä¹°å¾ˆå¤šï¼Œæ—©æ—©å°±ç­”åº”äº†çˆ¶æ¯ä»Šå¹´çš„ç¥¨æ²¡é—®é¢˜ï¼Œåˆ°ç°åœ¨ä¸€å¼ ç¥¨æ²¡ä¹°åˆ°ï¼Œè™½ç„¶å®¶é‡Œå·²ç»è®¢äº†æ±½è½¦ç¥¨ï¼Œè®©æˆ‘ä¸ç”¨æ“å¿ƒï¼Œä½†æ˜¯æƒ³æƒ³ä»–ä»¬ä¸€è¡Œè¿˜æœ‰å°å­©ï¼Œå¿ƒè¿˜æ˜¯å¾ˆä¼¤çš„ã€‚
è¿™æ®µæ—¶é—´ä» 12306Bypass åˆ° testerSunshine å¤§ä½¬å†™çš„ [12306](https://github.com/testerSunshine/12306)ï¼Œè¿˜æ˜¯æ²¡æŠ¢åˆ°ç¥¨ï¼Œç´¢æ€§å°±è‡ªå·±å†™äº†ä¸€ä¸ªï¼Œå¸Œæœ›ä¹Ÿèƒ½å¸®åŠ©åˆ°æ›´å¤šäºº

## Features
- [x] å¤šæ—¥æœŸæŸ¥è¯¢ä½™ç¥¨
- [x] è‡ªåŠ¨æ‰“ç ä¸‹å•
- [x] ç”¨æˆ·çŠ¶æ€æ¢å¤
- [x] ç”µè¯è¯­éŸ³é€šçŸ¥
- [x] å¤šè´¦å·ã€å¤šä»»åŠ¡ã€å¤šçº¿ç¨‹æ”¯æŒ
- [x] å•ä¸ªä»»åŠ¡å¤šç«™ç‚¹æŸ¥è¯¢ 
- [x] åˆ†å¸ƒå¼è¿è¡Œ
- [x] Docker æ”¯æŒ
- [ ] é‚®ä»¶é€šçŸ¥
- [ ] Web ç®¡ç†é¡µé¢

## ä½¿ç”¨
py12306 éœ€è¦è¿è¡Œåœ¨ python 3.6 ä»¥ä¸Šç‰ˆæœ¬ï¼ˆå…¶å®ƒç‰ˆæœ¬æš‚æœªæµ‹è¯•)

**1. å®‰è£…ä¾èµ–**
```bash
git clone https://github.com/pjialin/py12306

pip install -r requirements.txt
```

**2. é…ç½®ç¨‹åº**
```bash
cp env.py.example env.py
```
è‡ªåŠ¨æ‰“ç 

æ‰“ç ä¾èµ–äºè‹¥å¿«å¹³å°ï¼Œéœ€è¦å…ˆåˆ° [http://www.ruokuai.com](http://www.ruokuai.com/login) æ³¨å†Œä¸€ä¸ªè´¦å·åå¡«å†™åˆ°é…ç½®ä¸­

è¯­éŸ³é€šçŸ¥

è¯­éŸ³éªŒè¯ç ä½¿ç”¨çš„æ˜¯é˜¿é‡Œäº‘ API å¸‚åœºä¸Šçš„ä¸€ä¸ªæœåŠ¡å•†ï¼Œéœ€è¦åˆ° [https://market.aliyun.com/products/57126001/cmapi019902.html](https://market.aliyun.com/products/57126001/cmapi019902.html) è´­ä¹°åå°† appcode å¡«å†™åˆ°é…ç½®ä¸­

**3. å¯åŠ¨å‰æµ‹è¯•**

ç›®å‰æä¾›äº†ä¸€äº›ç®€å•çš„æµ‹è¯•ï¼ŒåŒ…æ‹¬ç”¨æˆ·è´¦å·æ£€æµ‹ï¼Œä¹˜å®¢ä¿¡æ¯æ£€æµ‹ï¼Œè½¦ç«™æ£€æµ‹ç­‰

å¼€å§‹æµ‹è¯• -t 
```bash
python main.py -t
```

æµ‹è¯•è¯­éŸ³é€šçŸ¥ -t -n
```bash
# é»˜è®¤ä¸ä¼šè¿›è¡Œé€šçŸ¥æµ‹è¯•ï¼Œè¦å¯¹é€šçŸ¥è¿›è¡Œæµ‹è¯•éœ€è¦åŠ ä¸Š -n å‚æ•° 
python main.py -t -n
```

**4. è¿è¡Œç¨‹åº**
```bash
python main.py
```

### å‚æ•°åˆ—è¡¨

- -t æµ‹è¯•é…ç½®ä¿¡æ¯
- -t -n æµ‹è¯•é…ç½®ä¿¡æ¯ä»¥åŠé€šçŸ¥æ¶ˆæ¯
- -c æŒ‡å®šè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ä½ç½®

### åˆ†å¸ƒå¼é›†ç¾¤

é›†ç¾¤ä¾èµ–äº redisï¼Œç›®å‰æ”¯æŒæƒ…å†µ
- å•å°ä¸»èŠ‚ç‚¹å¤šä¸ªå­èŠ‚ç‚¹åŒæ—¶è¿è¡Œ
- ä¸»èŠ‚ç‚¹å®•æœºåè‡ªåŠ¨åˆ‡æ¢æå‡å­èŠ‚ç‚¹ä¸ºä¸»èŠ‚ç‚¹
- ä¸»èŠ‚ç‚¹æ¢å¤åè‡ªåŠ¨æ¢å¤ä¸ºçœŸå®ä¸»èŠ‚ç‚¹
- é…ç½®é€šè¿‡ä¸»èŠ‚ç‚¹åŒæ­¥åˆ°æ‰€æœ‰å­èŠ‚ç‚¹
- ä¸»èŠ‚ç‚¹é…ç½®ä¿®æ”¹åæ— éœ€é‡å¯å­èŠ‚ç‚¹ï¼Œæ”¯æŒè‡ªåŠ¨æ›´æ–°
- å­èŠ‚ç‚¹æ¶ˆæ¯å®æ—¶åŒæ­¥åˆ°ä¸»èŠ‚ç‚¹

**ä½¿ç”¨**

å°†é…ç½®æ–‡ä»¶çš„ä¸­ `CLUSTER_ENABLED` æ‰“å¼€å³å¼€å¯åˆ†å¸ƒå¼

ç›®å‰æä¾›äº†ä¸€ä¸ªå•ç‹¬çš„å­èŠ‚ç‚¹é…ç½®æ–‡ä»¶ `env.slave.py.example` å°†æ–‡ä»¶ä¿®æ”¹ä¸º `env.slave.py`ï¼Œ é€šè¿‡ `python main -c env.slave.py` å³å¯å¿«é€Ÿå¯åŠ¨


## Docker ä½¿ç”¨
**1. å°†é…ç½®æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°***
```bash
docker run --rm pjialin/py12306 cat /config/env.py > env.py
# æˆ–
curl https://raw.githubusercontent.com/pjialin/py12306/master/env.docker.py.example -o env.py
```

**2. ä¿®æ”¹å¥½é…ç½®åè¿è¡Œ**
```bash
docker run -d -v $(pwd):/config -v py12306:/data pjialin/py12306
```
å½“å‰ç›®å½•ä¼šå¤šä¸€ä¸ª 12306.log çš„æ—¥å¿—æ–‡ä»¶ï¼Œ `tail -f 12306.log`

## æ›´æ–°
### 19-01-10
* æ”¯æŒåˆ†å¸ƒå¼é›†ç¾¤

## ä¸‹å•æˆåŠŸæˆªå›¾
![ä¸‹å•æˆåŠŸå›¾ç‰‡](./data/images/order_success.png)

## Thanks
æ„Ÿè°¢å¤§ä½¬ [testerSunshine](https://github.com/testerSunshine/12306)ï¼Œå€Ÿé‰´äº†éƒ¨åˆ†å®ç°

## License

[Apache License.](https://github.com/pjialin/py12306/blob/master/LICENSE)
